/*! bebella 2016-06-30 */
function view(a){return APP_URL+"/admin/"+a}function api_v1(a){return APP_URL+"/api/v1/"+a}function attr(a,b){for(var c in b)"created_at"==c||"updated_at"==c?a[c]=new Date(b[c]):c.startsWith("has_")||c.startsWith("is_")||c.startsWith("used_for_")||"active"==c?a[c]=1===b[c]:a[c]=b[c]}var Bebella=angular.module("Bebella",["ui.router","datatables"]),APP_URL=$("#APP_URL").val();Bebella.run([function(){}]),Bebella.factory("Category",[function(){var a=new Function;return a}]),Bebella.factory("Product",[function(){var a=new Function;return a}]),Bebella.factory("User",[function(){var a=new Function;return a}]),Bebella.service("CurrentCategory",["Category",function(a){var b=this,c=new a;b.get=function(){return c},b.clear=function(){c=new a}}]),Bebella.service("CurrentProduct",["Product",function(a){var b=this,c=new a;b.get=function(){return c},b.clear=function(){c=new a}}]),Bebella.service("CategoryRepository",["$http","$q","Category",function(a,b,c){var d=this;d.find=function(d){var e=b.defer();return a.get(api_v1("category/find/"+d)).then(function(a){var b=new c;attr(b,a.data),e.resolve(b)},function(a){e.reject(a)}),e.promise},d.all=function(){var d=b.defer();return a.get(api_v1("category/all")).then(function(a){var b=_.map(a.data,function(a){var b=new c;return attr(b,a),b});d.resolve(b)},function(a){d.reject(a)}),d.promise},d.edit=function(c){var d=b.defer(),e=JSON.stringify(c);return a.post(api_v1("category/edit"),e).then(function(a){d.resolve(c)},function(a){d.reject(a)}),d.promise},d.save=function(c){var d=b.defer(),e=JSON.stringify(c);return a.post(api_v1("category/save"),e).then(function(a){c.id=a.data.id,d.resolve(c)},function(a){d.reject(a)}),d.promise}}]),Bebella.service("ProductRepository",["$http","$q","Product",function(a,b,c){var d=this;d.find=function(d){var e=b.defer();return a.get(api_v1("product/find/"+d)).then(function(a){var b=new c;attr(b,a.data),e.resolve(b)},function(a){e.reject(a)}),e.promise},d.all=function(){var d=b.defer();return a.get(api_v1("product/all")).then(function(a){var b=_.map(a.data,function(a){var b=new c;return attr(b,a),b});d.resolve(b)},function(a){d.reject(a)}),d.promise},d.edit=function(c){var d=b.defer(),e=JSON.stringify(c);return a.post(api_v1("product/edit"),e).then(function(a){d.resolve(c)},function(a){d.reject(a)}),d.promise},d.save=function(c){var d=b.defer(),e=JSON.stringify(c);return a.post(api_v1("product/save"),e).then(function(a){c.id=a.data.id,d.resolve(c)},function(a){d.reject(a)}),d.promise}}]),Bebella.service("UserRepository",["$http","$q","User",function(a,b,c){var d=this;d.all=function(){var c=b.defer();return a.get(api_v1("user/all")).then(function(a){},function(a){c.reject(a)}),c.promise}}]),Bebella.controller("CategoryEditCtrl",["$scope","$stateParams","CategoryRepository",function(a,b,c){a.edit=function(){c.edit(a.category).then(function(a){alert("Categoria editada com sucesso.")},function(a){alert("Erro ao criar esta categoria.")})},c.find(b.categoryId).then(function(b){a.category=b},function(a){alert("Houve um erro na obtenção dos dados desta categoria")})}]),Bebella.controller("CategoryListCtrl",["$scope","CategoryRepository",function(a,b){b.all().then(function(b){a.categories=b},function(a){alert("Houve um erro na obtenção da lista de categorias")})}]),Bebella.controller("CategoryNewCtrl",["$scope","CurrentCategory","CategoryRepository",function(a,b,c){a.category=b.get(),a.create=function(){c.save(a.category).then(function(a){alert("Categoria cadastrada com sucesso."),b.clear()},function(a){alert("Erro ao criar esta categoria.")})},a.clear=function(){b.clear(),a.category=b.get()}}]),Bebella.controller("ChannelListCtrl",["$scope",function(a){a.test="Channel List"}]),Bebella.controller("ChannelNewCtrl",["$scope",function(a){a.test="Channel New"}]),Bebella.controller("ProductOptionListCtrl",["$scope",function(a){a.test="Product Option List"}]),Bebella.controller("ProductOptionNewCtrl",["$scope",function(a){a.test="Product Option New"}]),Bebella.controller("ProductEditCtrl",["$scope","$stateParams","ProductRepository","CategoryRepository",function(a,b,c,d){a.edit=function(){c.edit(a.product).then(function(a){alert("Produto editado com sucesso.")},function(a){alert("Erro ao criar este produto.")})},c.find(b.productId).then(function(b){a.product=b},function(a){alert("Houve um erro na obtenção dos dados deste produto")}),d.all().then(function(b){a.categories=b},function(a){alert("Houve um erro na obtenção da lista de categorias")})}]),Bebella.controller("ProductListCtrl",["$scope","ProductRepository",function(a,b){b.all().then(function(b){a.products=b},function(a){alert("Houve um erro na obtenção da lista de produtos.")})}]),Bebella.controller("ProductNewCtrl",["$scope","CurrentProduct","CategoryRepository","ProductRepository",function(a,b,c,d){a.product=b.get(),a.create=function(){d.save(a.product).then(function(a){alert(a.id),alert("Produto criado com sucesso.")},function(){alert("Houve um erro na criação do produto.")})},a.clear=function(){b.clear(),a.product=b.get()},c.all().then(function(b){a.categories=b},function(a){alert("Houve um erro na obtenção das lista de categorias")})}]),Bebella.controller("RecipeListCtrl",["$scope",function(a){a.test="Recipe List"}]),Bebella.controller("RecipeNewCtrl",["$scope",function(a){a.test="Recipe New"}]),Bebella.controller("StoreListCtrl",["$scope",function(a){a.test="Store List"}]),Bebella.controller("StoreNewCtrl",["$scope",function(a){a.test="Store New"}]),Bebella.controller("UserListCtrl",["$scope",function(a){a.test="User List"}]),Bebella.controller("UserNewCtrl",["$scope",function(a){a.test="User New"}]),Bebella.directive("fileread",[function(){return{scope:{fileread:"="},link:function(a,b,c){b.bind("change",function(b){var c=new FileReader;c.onload=function(b){a.$apply(function(){a.fileread=b.target.result})},c.readAsDataURL(b.target.files[0])})}}}]),Bebella.config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/"),a.state("user_new",{url:"/user/new",views:{MainContent:{templateUrl:view("user/new")}}}).state("user_list",{url:"/user/list",views:{MainContent:{templateUrl:view("user/list")}}}).state("recipe_new",{url:"/recipe/new",views:{MainContent:{templateUrl:view("recipe/new")}}}).state("recipe_list",{url:"/recipe/list",views:{MainContent:{templateUrl:view("recipe/list")}}}).state("category_new",{url:"/category/new",views:{MainContent:{templateUrl:view("category/new")}}}).state("category_list",{url:"/category/list",views:{MainContent:{templateUrl:view("category/list")}}}).state("category_edit",{url:"/category/edit/{categoryId}",views:{MainContent:{templateUrl:view("category/edit")}}}).state("store_new",{url:"/store/new",views:{MainContent:{templateUrl:view("store/new")}}}).state("store_list",{url:"/store/list",views:{MainContent:{templateUrl:view("store/list")}}}).state("channel_new",{url:"/channel/new",views:{MainContent:{templateUrl:view("channel/new")}}}).state("channel_list",{url:"/channel/list",views:{MainContent:{templateUrl:view("channel/list")}}}).state("product_new",{url:"/product/new",views:{MainContent:{templateUrl:view("product/new")}}}).state("product_list",{url:"/product/list",views:{MainContent:{templateUrl:view("product/list")}}}).state("product_edit",{url:"/product/edit/{productId}",views:{MainContent:{templateUrl:view("product/edit")}}}).state("product_option_new",{url:"/product_option/new",views:{MainContent:{templateUrl:view("product_option/new")}}}).state("product_option_list",{url:"/product_option/list",views:{MainContent:{templateUrl:view("product_option/list")}}}).state("home",{url:"/",views:{MainContent:{templateUrl:view("dashboard")}}})}]);